# 关于Neo4j 3.5.9

## 1. neo4j概述（产生、发展、应用）

### (1) 产生

简单地说，我们可以说图数据库主要用于存储更多的连接数据。

如果我们使用RDBMS数据库来存储更多连接的数据，那么它们不能提供用于遍历大量数据的适当性能。 在这些情况下，Graph Database提高了应用程序性能。

如今，大多数社交网络应用程序（如Facebook，Google +，LinkedIn，Twitter，Yammer等）和视频托管应用程序（如Google YouTube，Flickr，Yahoo Video等）都在使用更多连接的数据。

我们将观察什么是连接数据？ 以及这些应用程序如何与某些实时应用程序存储数据。

#### 方案1：Google+



使用Google+（GooglePlus）应用程序来了解现实世界中Graph数据库的需求。 观察下面的图表。
在这里，我们用圆圈表示了Google+应用个人资料。



![Google+应用个人资料](.\img\201612241627042269.jpg)

在上图中，轮廓“A”具有圆圈以连接到其他轮廓：家庭圈（B，C，D）和朋友圈（X，Y）。

再次，如果我们打开配置文件“B”，我们可以观察以下连接的数据。





![连接的数据](.\img\201612241630423807.jpg)





像这样，这些应用程序包含大量的结构化，半结构化和非结构化的连接数据。 在RDBMS数据库中表示这种非结构化连接数据并不容易。

如果我们在RDBMS数据库中存储这种更多连接的数据，那么检索或遍历是非常困难和缓慢的。
所以要表示或存储这种更连接的数据，我们应该选择一个流行的图数据库。



他们存储这种连接的数据与上面的图表中的相同，这样检索或遍历是非常容易和更快的。

#### 方案2：Facebook

利用Facebook应用程序了解现实世界中Graph数据库的需求。





![Facebook](https://atts.w3cschool.cn/attachments/day_161224/201612241639118710.jpg)





在上面的图中，Facebook Profile“A”已经连接到他的朋友，喜欢他的一些朋友，发送消息给他的一些朋友，跟随他喜欢的一些名人。



这意味着大量的连接数据配置文件A.如果我们打开其他配置文件，如配置文件B，我们将看到类似的大量的连接数据。

### （2）概念

Neo4j是一个世界领先的开源图形数据库。 它是由Neo技术使用Java语言完全开发的。

 图形数据库也称为图形数据库管理系统或GDBMS。 

#### Neo4j的特点

- 就像SQL的简单查询语言Neo4j CQL
- 它遵循属性图数据模型
- 它通过使用Apache Lucence支持索引
- 它支持UNIQUE约束
- 它包含一个用于执行CQL命令的UI：Neo4j数据浏览器
- 它支持完整的ACID（原子性，一致性，隔离性和持久性）规则
- 它采用原生图形库与本地GPE（图形处理引擎）
- 它支持查询的数据导出到JSON和XLS格式
- 它提供了REST API，可以被任何编程语言（如Java，Spring，Scala等）访问
- 它提供了可以通过任何UI MVC框架（如Node JS）访问的Java脚本
- 它支持两种Java API：Cypher API和Native Java API来开发Java应用程序



#### Neo4j的优点

- 它很容易表示连接的数据
- 检索/遍历/导航更多的连接数据是非常容易和快速的
- 它非常容易地表示半结构化数据
- Neo4j CQL查询语言命令是人性化的可读格式，非常容易学习
- 使用简单而强大的数据模型
- 它不需要复杂的连接来检索连接的/相关的数据，因为它很容易检索它的相邻节点或关系细节没有连接或索引

#### Neo4j的缺点或限制

- AS的Neo4j 2.1.3最新版本，它具有支持节点数，关系和属性的限制。
- 它不支持Sharding。



### 图数据库

图形数据库是以图形结构的形式存储数据的数据库。 它以节点，关系和属性的形式存储应用程序的数据。 正如RDBMS以表的“行，列”的形式存储数据，GDBMS以“图形”的形式存储数据。 

它将结构化数据存储在网络上而不是表中。它是一个嵌入式的、基于磁盘的、具备完全的事务特性的Java持久化引擎，但是它将结构化数据存储在网络(从数学角度叫做图)上而不是表中。

Neo4j也可以被看作是一个高性能的图引擎，该引擎具有成熟数据库的所有特性。程序员工作在一个面向对象的、灵活的网络结构下而不是严格、静态的表中——但是他们可以享受到具备完全的事务特性、企业级的数据库的所有好处。

属性图模型规则

- 表示节点，关系和属性中的数据
- 节点和关系都包含属性
- 关系连接节点
- 属性是键值对
- 节点用圆圈表示，关系用方向键表示。
- 关系具有方向：单向和双向。
- 每个关系包含“开始节点”或“从节点”和“到节点”或“结束节点”

 ![img](.\img\201612241711466890.jpg) 

最简单的图:

 ![img](.\img\201612251846335428.png) 

我们可以使用节点表示社交网络（如个人资料）。 它不包含任何属性。

向个人资料添加一些属性

 ![img](https://atts.w3cschool.cn/attachments/day_161225/201612251847241600.png) 

 在两个节点之间创建关系 :

 ![img](https://atts.w3cschool.cn/attachments/day_161225/201612251848188141.png) 

 此处在两个配置文件之间创建关系名称“跟随”。 这意味着Profile-I遵循Profile-II。 

复杂的示例图:

 ![img](https://atts.w3cschool.cn/attachments/day_161225/201612251849228819.png) 



### RDBMS与图数据库

|      | RDBMS                     | Graph Database                      |
| ---- | ------------------------- | ----------------------------------- |
|      | Tables 表                 | Graphs 图表                         |
|      | Rows 行                   | Nodes 节点                          |
|      | Columns and Data 列和数据 | Properties and its values属性及其值 |
|      | Constraints 约束          | Relationships 关系                  |
|      | Joins 加入                | Traversal 遍历                      |

### 热门图形数据库

Neo4j是一个流行的图数据库。 其他图形数据库是Oracle NoSQL数据库，OrientDB，HypherGraphDB，GraphBase，InfiniteGraph，AllegroGraph。

### 图形

图形是一组节点和连接这些节点的关系。 节点和关系包含表示数据的属性。 属性是用于表示数据的键值对。 



neo4j图数据库中的基本元素：

**节点（node）：**表示一个实体记录，一个节点包含多个属性和标签；

**关系（relationship）：**用于将节点关联起来构成图，关系也称为图论的边；

**属性（property）:**节点与关系都可以有多个属性，属性是由键值对组成的，如：哈希

**标签（label）:** 标签指示一组拥有相同属性的节点，但不强制要求相同，一个节点可以有多个标签；

**路径（path）：**图中任意两个节点都存在有关系组成的路径 ，路径有长短之分

**数据浏览器**

## 节点

节点是图表的基本单位。 它包含具有键值对的属性，如下所示





![节点](https://atts.w3cschool.cn/attachments/day_161226/201612260847226397.png)

这里Node Name =“Employee”，它包含一组属性作为键值对

## 属性

属性是用于描述图节点和关系的键值对

**Key =值**

其中Key是一个字符串

值可以通过使用任何Neo4j数据类型来表示

## 关系

关系是图形数据库的另一个主要构建块。 它连接两个节点，如下所示。



![关系](https://atts.w3cschool.cn/attachments/day_161226/201612260904329065.png)

像节点一样，关系也可以包含属性作为键值对。

![WORKS_FOR](https://atts.w3cschool.cn/attachments/day_161226/201612260907367369.png)



这里的“WORKS_FOR”关系有一个属性作为键值对

ID = 123

它代表了这种关系的一个ID。



## 标签：

Label将一个公共名称与一组节点或关系相关联。 节点或关系可以包含一个或多个标签。 我们可以为现有节点或关系创建新标签。 我们可以从现有节点或关系中删除现有标签。

从前面的图中，我们可以观察到有两个节点。

左侧节点都有一个标签：“EMP”，而右侧节点都有一个标签：“Dept”。

这两个节点之间的关系，也有一个标签：“WORKS_FOR”

## Neo4j数据浏览器

一旦我们安装Neo4j，我们可以访问Neo4j数据浏览器使用以下URL

http://localhost:7474/browser/

![image-20191025191953598](.\img\image-20191025191953598.png)



# Neo4j - CQL简介

## Neo4j CQL命令/条款

常用的Neo4j CQL命令/条款如下：

| S.No. | CQL命令/条      | 用法                         |
| ----- | --------------- | ---------------------------- |
| 1。   | CREATE 创建     | 创建节点，关系和属性         |
| 2。   | MATCH 匹配      | 检索有关节点，关系和属性数据 |
| 3。   | RETURN 返回     | 返回查询结果                 |
| 4。   | WHERE 哪里      | 提供条件过滤检索数据         |
| 5。   | DELETE 删除     | 删除节点和关系               |
| 6。   | REMOVE 移除     | 删除节点和关系的属性         |
| 7。   | ORDER BY以…排序 | 排序检索数据                 |
| 8。   | SET 组          | 添加或更新标签               |

## Neo4j CQL 函数

以下是常用的Neo4j CQL函数：

| S.No. | 定制列表功能      | 用法                                             |
| ----- | ----------------- | ------------------------------------------------ |
| 1。   | String 字符串     | 它们用于使用String字面量。                       |
| 2。   | Aggregation 聚合  | 它们用于对CQL查询结果执行一些聚合操作。          |
| 3。   | Relationship 关系 | 他们用于获取关系的细节，如startnode，endnode等。 |

我们将在后面的章节中详细讨论所有Neo4j CQL命令，子句和函数语法，用法和示例。

## Neo4j CQL数据类型

这些数据类型与Java语言类似。 它们用于定义节点或关系的属性



Neo4j CQL支持以下数据类型：

| S.No. | CQL数据类型 | 用法                            |
| ----- | ----------- | ------------------------------- |
| 1.    | boolean     | 用于表示布尔文字：true，false。 |
| 2.    | byte        | 用于表示8位整数。               |
| 3.    | short       | 用于表示16位整数。              |
| 4.    | int         | 用于表示32位整数。              |
| 5.    | long        | 用于表示64位整数。              |
| 6.    | float       | I用于表示32位浮点数。           |
| 7.    | double      | 用于表示64位浮点数。            |
| 8.    | char        | 用于表示16位字符。              |
| 9.    | String      | 用于表示字符串。                |









## 2. neo4j的安装







## 3. neo4j的应用对比







## 4. 一些想法



